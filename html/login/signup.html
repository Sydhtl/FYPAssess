<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FYPAssess - Sign Up</title>
    <link rel="stylesheet" href="../../css/background.css">
    <link rel="stylesheet" href="../../css/login.css">
</head>
<body>
<div class="page">
    <div class="left">
        <div class="container1">
            <img src="../../assets/UPM Logoo.jpg" alt="UPM" width="300px" height="200px"> <br>
            <b class="title">FYPAsses</b>
            <P class="fulltitle">Final Year Project Assessment System</P>
            <div class="description">Student and Lecturers FYP Portal</div>
        </div>
    </div>
    <div class="right"> 
        <div class="container2" id="signup">
            <p id="welcomeBack">Create Account</p>

            <p id="UsernamePassword">Full Name</p>
            <input type="text" placeholder="Enter your full name" required />
            
            <p id="UsernamePassword">Staff ID or Student ID</p>
            <input type="text" placeholder="Enter Staff or Student ID" required />
            
            
           <div class="input-group">
            <i class="fas fa-lock input-icon"></i>
            <p id="UsernamePassword">Password</p> 
            <input type="password" placeholder="Enter your password" id="password" required onkeyup="checkPasswordStrength(this.value)" > 
            <i class="fas fa-eye password-toggle"></i>
                        <label for="password" class="label-placeholder">Password Strength</label>
                        <!-- Info icon with tooltip showing password requirements -->
                        <span class="info-tooltip" aria-hidden="true">
                                â“˜
                                <span class="tooltip-text">Password requirements: at least 8 characters, include uppercase and lowercase letters, a number and a special character.</span>
                        </span>
              </div>

           <div id="strength-indicator-container">
            <div id="strength-bar"></div>
            <span id="strength-text">Enter password</span>
             </div>
            
            <a href="information.html" id="continue1" class="disabled-link" style="text-decoration: none; display: block;">Continue</a>
            
            <p id="noAccount">Already have an account?</p>
            <a href="login.html" id="signUpButton" style="text-decoration: none; display: block;">Sign In</a>
        </div>
    </div>
</div>
<p class="faculty">
    FACULTY OF COMPUTER SCIENCE AND INFORMATION TECHNOLOGY
</p>
</body>
<script>

function checkPasswordStrength(password) {
    const strengthBar = document.getElementById('strength-bar');
    const strengthText = document.getElementById('strength-text');
    let score = 0;

    // Remove previous classes
    strengthBar.className = '';

    if (password.length >= 8) {
        score += 1;
    }
    // Check for mixed case (lowercase and uppercase)
    if (password.match(/[a-z]/) && password.match(/[A-Z]/)) {
        score += 1;
    }
    // Check for numbers
    if (password.match(/\d/)) {
        score += 1;
    }
    // Check for special characters
    if (password.match(/[^a-zA-Z\d]/)) {
        score += 1;
    }

    // Update the visual indicator based on the score
    if (password.length === 0) {
        strengthBar.style.width = '0%';
        strengthText.textContent = 'Enter password';
        strengthText.style.color = '#666';
    } else if (score < 2) {
        strengthBar.style.width = '33%';
        strengthBar.classList.add('weak');
        strengthText.textContent = 'Weak';
        strengthText.style.color = '#dc3544';
    } else if (score < 4) {
        strengthBar.style.width = '66%';
        strengthBar.classList.add('medium');
        strengthText.textContent = 'Medium';
        strengthText.style.color = '#ffc107';
    } else {
        strengthBar.style.width = '100%';
        strengthBar.classList.add('strong');
        strengthText.textContent = 'Strong';
        strengthText.style.color = '#28a745';
    }
}

// Enable Continue only when required fields are filled and password strength is sufficient
document.addEventListener('DOMContentLoaded', function() {
    const fullName = document.querySelector('#signup input[placeholder="Enter your full name"]');
    const studentId = document.querySelector('#signup input[placeholder="Enter Staff or Student ID"]');
    const password = document.getElementById('password');
    const continueLink = document.getElementById('continue1');

    function passwordIsStrongEnough() {
        const bar = document.getElementById('strength-bar');
        // allow medium or strong
        return bar.classList.contains('strong') 
    }

    function checkForm() {
        const nameFilled = fullName && fullName.value.trim().length > 0;
        const idFilled = studentId && studentId.value.trim().length > 5;
        if (nameFilled && idFilled && passwordIsStrongEnough()) {
            continueLink.classList.remove('disabled-link');
        } else {
            continueLink.classList.add('disabled-link');
        }
    }

    // Listen for changes
    if (fullName) fullName.addEventListener('input', checkForm);
    if( studentId) studentId.addEventListener('input', checkForm);
    if (password) password.addEventListener('input', checkForm);

    // Also re-check when password strength function runs (it updates classes)
    const origCheck = window.checkPasswordStrength;
    window.checkPasswordStrength = function(pw) {
        origCheck(pw);
        checkForm();
    };

    // Prevent navigation if disabled
    continueLink.addEventListener('click', function(e) {
        if (this.classList.contains('disabled-link')) {
            e.preventDefault();
            // optional: focus first invalid field
            if (!fullName.value.trim()) fullName.focus();
            else password.focus();
        }
    });
    // Initial check
    checkForm();
});
</script>
</html>